(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},i=new Error().stack;i&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[i]="318daca6-3162-4f1d-9ab3-9ea98f984221",s._sentryDebugIdIdentifier="sentry-dbid-318daca6-3162-4f1d-9ab3-9ea98f984221")}catch{}})();var _global=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};_global.SENTRY_RELEASE={id:"4.37.21@a9113e14ccb"},function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},i=new Error().stack;i&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[i]="318daca6-3162-4f1d-9ab3-9ea98f984221",s._sentryDebugIdIdentifier="sentry-dbid-318daca6-3162-4f1d-9ab3-9ea98f984221")}catch{}}();var _global=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};_global.SENTRY_RELEASE={id:"4.37.21@a9113e14ccb"},(self.webpackChunkvisme_web=self.webpackChunkvisme_web||[]).push([[5292],{59770:(s,i,o)=>{var n=o(997201),l=o(383758);function c(f,d,a){var v=f==null?0:f.length;return v?(d=a||d===void 0?1:l(d),n(f,d<0?0:d,v)):[]}s.exports=c},948063:(s,i,o)=>{"use strict";o.r(i),o.d(i,{default:()=>p});var n=o(411855),l=o(55946),c=o(491530),f=o(767666),d=o(432563),a=o(833085);const v={container:"container--WzyguO5"};var S=o(333515);const I=u=>{let{object:r,child:e,thumbBase64:m}=u;const{appStore:b}=(0,c.g)(),g=(0,n.useRef)(null);return(0,S.A)(g,r.flipX,!1,b.settings.mode),n.createElement("img",{ref:g,alt:e.name,src:e.previewStaticURL||m||e.pose.previewUrl,height:r.height})},O=(0,l.PA)(I),w=u=>{let{object:r,child:e}=u;var m,b,g;const{appStore:h}=(0,c.g)(),y=h==null||(m=h.vismeObjectsStore)===null||m===void 0?void 0:m.characterEditorStore,[C,D]=(0,n.useState)(""),[j,R]=(0,n.useState)(!1),J=(b=h.settings)===null||b===void 0?void 0:b.isEditorMode,L=(g=h.settings)===null||g===void 0?void 0:g.isDocumentView,T=e.type===a.u.CHARACTER,t=e.isCharacterEdited&&r.isSelected&&y?y?.character:e.threeJsCharacter;return(0,n.useEffect)(()=>{if(!(!J&&!L||!e?.isAssetsLoaded&&T||!e?.cachedAssets&&T))if(T&&t){let A=!1;const U={backgroundTransparent:!0,camera:{position:[0,.83,2.5],rotation:[0,0,0]}};return d.f.generateVismeObjectImage({vismeObject:t,vismeObjectPoseUrl:e.modelUrl,sceneConfig:U,cachedAssets:e.cachedAssets,useRandomBackground:!1}).then(B=>{A||D(B)}).finally(()=>{A||R(!0)}),()=>{A=!0}}else R(!0)},[e?.poseUrl,e?.isAssetsLoaded,t?.style,t?.gender,t?.skinTone,t?.eyeColor,JSON.stringify(t?.characterAssetsColors),JSON.stringify(t?.assets)]),n.createElement("div",{className:v.container},j?n.createElement(O,{object:r,child:e,thumbBase64:C}):n.createElement(f.A,null))},P=(0,l.PA)(w),E=u=>{let{object:r}=u;return n.createElement(n.Fragment,null,r.allChildren.map(e=>n.createElement(P,{key:e.id,child:e,object:r})))},p=(0,l.PA)(E)},432563:(s,i,o)=>{"use strict";o.d(i,{f:()=>d});var n=o(59770),l=o.n(n),c=o(114317);const d=c.types.model("VismeObjectImageGeneratorStore").volatile(()=>({counter:0,generationQueue:[]})).views(()=>({get isDebug(){return window.location.hash==="#debugAvatar"}})).actions(a=>({shiftQueue(){a.generationQueue=l()(a.generationQueue)}})).actions(a=>({generateVismeObjectImage:(0,c.flow)(function*(v){let{vismeObject:S,vismeObjectPoseUrl:I,sceneConfig:O,cachedAssets:w,useRandomBackground:P=!0}=v,E=null,p=null;const u=new Promise((e,m)=>{E=e,p=m}),r={vismeObject:S,vismeObjectPoseUrl:I,useRandomBackground:P,sceneConfig:O,cachedAssets:w,resolvePromise:E,rejectPromise:p,queueOrder:a.counter};return a.counter++,a.generationQueue=[...a.generationQueue,r],u.finally(()=>{a.isDebug||a.shiftQueue()})})})).create()}}]);

//# sourceMappingURL=ThreeJsThumbnail.c52ddb91cacd4140ec20.chunk.js.map